(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{336:function(s,t,a){s.exports=a.p+"assets/img/20230921_142321.b41fd7ba.png"},337:function(s,t,a){s.exports=a.p+"assets/img/20230921_142445.3935474d.png"},338:function(s,t,a){s.exports=a.p+"assets/img/20230921_143458.bf0f3e7a.png"},339:function(s,t,a){s.exports=a.p+"assets/img/20230921_143553.63d71f93.png"},340:function(s,t,a){s.exports=a.p+"assets/img/20230921_143708.d898d83f.png"},460:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"云胡的编程周报第-005-期"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#云胡的编程周报第-005-期"}},[s._v("#")]),s._v(" 云胡的编程周报第 005 期")]),s._v(" "),t("blockquote",[t("p",[s._v("时间：2023/9/11 - 2023/9/17")])]),s._v(" "),t("h2",{attrs:{id:"一、点滴记录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、点滴记录"}},[s._v("#")]),s._v(" 一、点滴记录")]),s._v(" "),t("ol",[t("li",[t("code",[s._v("Intellij IDEA")]),s._v(" 中使用 "),t("code",[s._v("shift")]),s._v(" + "),t("code",[s._v("alt")]),s._v("+ 鼠标左键可以多选光标。")]),s._v(" "),t("li",[t("code",[s._v("Element Plus")]),s._v(" 表格分页加载，切换时的等待期间可以用 "),t("code",[s._v("v-loadding")]),s._v(" 加载提示，加载成功后关闭。")]),s._v(" "),t("li",[s._v("快速删除 "),t("code",[s._v("node_modules")])])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("npm install rimraf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g # 安装 rimraf\n\nrimraf node_modules # 进入项目目录后进行删除\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[t("code",[s._v("Linux")]),s._v(" 服务器刚登录进去的目录一般是用户目录，然后项目的位置在里面好几层，因此可以写一个简单的 "),t("code",[s._v("sh")]),s._v(" 脚本直接进入到想去的位置。")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/usr/bin/env bash")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/library/library-web-vue/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("运行：\n"),t("code",[s._v("source")]),s._v(" 是内置命令，用途是读取文件中内容，并在当前 "),t("code",[s._v("shell")]),s._v("中逐条执行。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" xxx.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("不可以使用 "),t("code",[s._v("./xxx.sh")]),s._v("，会新建一个子 "),t("code",[s._v("shell")]),s._v("，然后在子 "),t("code",[s._v("shell")]),s._v("中运行文件内容。")]),s._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[s._v("之前通过 "),t("code",[s._v("Python")]),s._v(" 爬取到的豆瓣图片存在数据库的步骤：\n"),t("ul",[t("li",[s._v("先存在本地，然后手动上传到腾讯云 "),t("code",[s._v("oss")]),s._v(" 上")]),s._v(" "),t("li",[s._v("在腾讯云 "),t("code",[s._v("oss")]),s._v(" 上导出豆瓣图片的 "),t("code",[s._v("csv")]),s._v(" 文件")]),s._v(" "),t("li",[s._v("读取 "),t("code",[s._v("csv")]),s._v(" 文件，获取豆瓣图片在自己腾讯云 "),t("code",[s._v("oss")]),s._v(" 上的链接，然后存到数据库中。")])])])]),s._v(" "),t("p",[s._v("新的方式：")]),s._v(" "),t("ul",[t("li",[s._v("先存到本地，然后通过腾讯云 "),t("code",[s._v("sdk")]),s._v("直接传到 "),t("code",[s._v("oss")]),s._v(" 上并获取图片链接")]),s._v(" "),t("li",[s._v("将图片链接存到数据库中")])]),s._v(" "),t("ol",{attrs:{start:"6"}},[t("li",[s._v("修复「云胡图书馆」字体大小改变后，进入下一章或者上一章字体又回到原来的大小。")])]),s._v(" "),t("p",[t("code",[s._v("rendition.next()")]),s._v("可以进入下一章，但我在成功后的回调函数上改了最新的字体大小，发现依然没用，最后通过监听 "),t("code",[s._v("rendered")]),s._v("渲染事件，进行字体的更新，感觉应该在渲染前就要弄好字体，渲染后再弄最新的字体，实现方式不是很好，目前没有办法，先这样。")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("      rendition"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rendered"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        fontSize"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parseInt")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("store"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("state"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("readFontSize"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rendition"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("themes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          rendition"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("themes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fontSize")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fontSize"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'px'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ol",{attrs:{start:"7"}},[t("li",[s._v("给「云胡图书馆」加上 "),t("code",[s._v("Element Plus")]),s._v(" 暗黑模式的时候，不知道为什么，老是无法成功，又调了几个小时，最后发现是 "),t("code",[s._v("style")]),s._v("上的 "),t("code",[s._v("scoped")]),s._v(" 属性会导致样式私有化，不会引入 "),t("code",[s._v("main.js")]),s._v(" 中配置的暗黑 "),t("code",[s._v("css")]),s._v(" 主题，所以解决办法，就是手动引入。")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("style scoped"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n@"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'element-plus/theme-chalk/dark/css-vars.css'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("style"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("正常模式：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(336),alt:"bca946f56ce7e8a153aab771fa38d0a.png"}})]),s._v(" "),t("p",[s._v("暗黑模式：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(337),alt:"82c0459f7b448c3cec96f81c21f55d4.png"}})]),s._v(" "),t("ol",{attrs:{start:"8"}},[t("li",[t("code",[s._v("Vue3")]),s._v(" 配置移动端自适应，平常在写 "),t("code",[s._v("css")]),s._v(" 的时候经常用 "),t("code",[s._v("px")]),s._v(" 作为单位，那么什么是 "),t("code",[s._v("px")]),s._v(" 呢？")])]),s._v(" "),t("blockquote",[t("p",[s._v("像素，为影像显示的基本单位，译自英文“pixel”，pix是英语单词picture的常用简写，加上英语单词“元素”element，就得到pixel，故“像素”表示“画像元素”之意，有时亦被称为pel（picture element）。"),t("br")]),s._v(" "),t("p",[s._v("每个这样的消息元素不是一个点或者一个方块，而是一个抽象的取样。仔细处理的话，一幅影像中的像素可以在任何尺度上看起来都不像分离的点或者方块；但是在很多情况下，它们采用点或者方块显示。"),t("br")]),s._v(" "),t("p",[s._v("每个像素可有各自的颜色值，可采三原色显示，因而又分成红色、绿色、蓝色三种子像素（RGB色域），或者青色、洋红色（紫色）、黄色和黑色（CMYK色域，印刷行业以及打印机中常见）。")]),s._v(" "),t("p",[s._v("照片是一个个取样点的集合，在影像没有经过不正确的/有损的压缩或相机镜头合适的前提下，单位面积内的像素越多代表分辨率越高，所显示的影像就会接近于真实物体。")])]),s._v(" "),t("p",[t("code",[s._v("px")]),s._v(" 是一个绝对单位长度，比如设置了某个控件的长度是 "),t("code",[s._v("10px")]),s._v("，那么不管在 "),t("code",[s._v("ipad")]),s._v("，还是手机，还是电脑，它的长度就会被固定成 "),t("code",[s._v("10px")]),s._v("。")]),s._v(" "),t("p",[t("code",[s._v("CSS3")]),s._v(" 的一个新单位叫做 "),t("code",[s._v("rem")]),s._v("，"),t("code",[s._v("rem")]),s._v(" 为元素设定字体大小时，是相对单位长度，相对的是 "),t("code",[s._v("HTML")]),s._v(" 根元素，因此只要不同的设备的 "),t("code",[s._v("HTML")]),s._v(" 根元素的是根据屏幕宽度变化的，那么使用 "),t("code",[s._v("rem")]),s._v(" 就可以做到自适应设备。")]),s._v(" "),t("p",[s._v("我们使用 "),t("code",[s._v("postcss-pxtorem")]),s._v(" 库来实现自适应设备。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("安装 "),t("code",[s._v("lib-flexible")]),s._v(" 和 "),t("code",[s._v("postcss-pxtorem")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" lib-flexible --save-dev\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" postcss-pxtorem@5.1.1 --save-dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("在 "),t("code",[s._v("main.js")]),s._v(" 引入 "),t("code",[s._v("lib-flexible")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lib-flexible'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("在 "),t("code",[s._v("package.json")]),s._v(" 同级新建 "),t("code",[s._v("postcss.config.cjs")]),s._v("文件，填入以下内容")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// postcss.config.cjs")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'postcss-pxtorem'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("rootValue")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("37.5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("propList")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("exclude")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/node_modules"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 忽略包文件转换 rem")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])])])]),s._v(" "),t("p",[s._v("重新运行即可发现自适应设备成功。")]),s._v(" "),t("ol",{attrs:{start:"9"}},[t("li",[t("p",[s._v("给「云胡图书馆」添加文本选中高亮功能")]),s._v(" "),t("p",[s._v("监听选中事件，然后将其高亮。")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("      rendition"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'selected'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("cfiRange"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" contents")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        rendition"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("annotations"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("highlight")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n            cfiRange"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'fill'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"#9370DB"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n        book"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRange")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cfiRange"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("range")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n              selectText"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" range"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("toString")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        contents"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSelection")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("removeAllRanges")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("高亮效果：\n"),t("img",{attrs:{src:a(338),alt:"image.png"}})])]),s._v(" "),t("li",[t("p",[s._v("给「云胡图书馆」添加分享书摘功能")]),s._v(" "),t("p",[s._v("由于我个人特别喜欢「微信读书 app」 的分享书摘功能，于是就打算自己模仿一个，思路是先拿到用户选中的文本字符串，点击分享书摘按钮，然后通过 "),t("code",[s._v("canvas")]),s._v(" 把文字画成一张图。")]),s._v(" "),t("p",[t("img",{attrs:{src:a(339),alt:"image.png"}})]),s._v(" "),t("p",[t("img",{attrs:{src:a(340),alt:"image.png"}})]),s._v(" "),t("p",[s._v("先画背景渐变色，然后绘制最上面的图片，然后对字符串进行分行，最后再一行一行画出来，最后是画一条线和云胡图书馆标志。")]),s._v(" "),t("p",[t("code",[s._v("canvas")]),s._v(" 绘制还有问题，就是会很模糊，这是为什么呢？")]),s._v(" "),t("p",[s._v("普通屏幕的像素（逻辑像素）和物理像素相等，比如 "),t("code",[s._v("100px")]),s._v(" 逻辑像素绘制出 "),t("code",[s._v("100px")]),s._v(" 物理像素，也就是我们看到的大小。")]),s._v(" "),t("p",[s._v("但是在高分屏屏幕上，"),t("code",[s._v("**window.devicePixelRatio**")]),s._v("** 表示当前显示设备的物理像素分辨率与 "),t("strong",[t("code",[s._v("**CSS**")])]),s._v(" 像素分辨率之比，简称 dpr。"),t("strong",[s._v("如果")]),s._v(" **"),t("code",[s._v("window.devicePixelRatio")]),s._v(" 值为 "),t("code",[s._v("2")]),s._v("，那么设置 "),t("code",[s._v("100px")]),s._v(" 逻辑像素，实际上用到的物理像素是 "),t("code",[s._v("200px")]),s._v("。")]),s._v(" "),t("p",[s._v("不管是否为高分屏， "),t("code",[s._v("canvas")]),s._v(" 中的单位 "),t("code",[s._v("1")]),s._v("逻辑像素，就是 "),t("code",[s._v("1")]),s._v(" 物理像素，那么用 "),t("code",[s._v("canvas")]),s._v(" 画出来的 "),t("code",[s._v("100px")]),s._v(" 逻辑像素，显示出来的物理像素也是 "),t("code",[s._v("100px")]),s._v("。")]),s._v(" "),t("p",[s._v("问题来了，如果 "),t("code",[s._v("dpr")]),s._v(" 是 "),t("code",[s._v("2")]),s._v("，理论上要显示 "),t("code",[s._v("200px")]),s._v("，这时候浏览器使用了图像算法将另外 "),t("code",[s._v("100px")]),s._v("的像素值填充，这时候就出现了模糊。")]),s._v(" "),t("p",[s._v("解决办法：")]),s._v(" "),t("p",[s._v("假设 "),t("code",[s._v("dpr")]),s._v(" 为 "),t("code",[s._v("2")]),s._v("，逻辑像素为 "),t("code",[s._v("100px")]),s._v("。")]),s._v(" "),t("ul",[t("li",[s._v("通过 "),t("code",[s._v("css")]),s._v(" 设置 "),t("code",[s._v("canvas")]),s._v(" 元素的大小为逻辑像素大小。")]),s._v(" "),t("li",[s._v("将 "),t("code",[s._v("canvas")]),s._v(" 画布大小乘以 "),t("code",[s._v("2")]),s._v(" 转换成实际像素（物理像素）大小，原来的 "),t("code",[s._v("100")]),s._v(" 个像素是靠算法生成的会模糊，现在的 "),t("code",[s._v("200")]),s._v(" 个像素全是原生的像素，这样就不会模糊。")]),s._v(" "),t("li",[s._v("现在是画布的大小准备好了，不代表画上去就会直接乘 "),t("code",[s._v("2")]),s._v("，因此需要通过 "),t("code",[s._v("scale")]),s._v(" 整体绘制时放大两倍。"),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" canvas "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" document"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myCanvas"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("canvas "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" ctx "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" canvas"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2d"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" ratio "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        \n    canvas"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("width "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" canvas"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("width "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'px'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    canvas"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("style"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("height "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" canvas"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("height "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'px'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    canvas"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("width "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" canvas"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("width "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" ratio"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    canvas"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("height "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" canvas"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("height "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" ratio"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ctx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("scale")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ratio"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ratio"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),s._v("由于 "),t("code",[s._v("canvas")]),s._v(" 画布大小变为原来 "),t("code",[s._v("2")]),s._v(" 倍，所以原来有使用到 "),t("code",[s._v("canvas")]),s._v(" 的大小要记得除于 "),t("code",[s._v("2")]),s._v("。")])])])]),s._v(" "),t("h2",{attrs:{id:"二、新发现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、新发现"}},[s._v("#")]),s._v(" 二、新发现")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("Hatchful")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.shopify.com/zh/tools/logo-maker",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.shopify.com/zh/tools/logo-maker"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("免费 "),t("code",[s._v("logo")]),s._v(" 制作器，「云胡图书馆」的 "),t("code",[s._v("logo")]),s._v(" 就是这个网站制作的。")])]),s._v(" "),t("li",[t("p",[s._v("epub.js")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/futurepress/epub.js",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/futurepress/epub.js"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("code",[s._v("epubjs")]),s._v(" 是一个 "),t("code",[s._v("npm")]),s._v(" 库，可以用来解析 "),t("code",[s._v("epub")]),s._v(" 电子书，「云胡图书馆」的在线阅读功能就是通过这个库实现的。")])]),s._v(" "),t("li",[t("p",[s._v("epub.js API 文档")]),s._v(" "),t("p",[t("a",{attrs:{href:"http://epubjs.org/documentation/0.3/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://epubjs.org/documentation/0.3/"),t("OutboundLink")],1)])]),s._v(" "),t("li",[t("p",[s._v("前端面试题库")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://vue3js.cn/interview/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://vue3js.cn/interview/"),t("OutboundLink")],1)])])])])}),[],!1,null,null,null);t.default=e.exports}}]);