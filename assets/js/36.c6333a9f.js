(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{321:function(s,a,t){s.exports=t.p+"assets/img/20231025-165555.e5c55562.png"},452:function(s,a,t){"use strict";t.r(a);var e=t(14),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"云胡的编程周报第-010-期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#云胡的编程周报第-010-期"}},[s._v("#")]),s._v(" 云胡的编程周报第 010 期")]),s._v(" "),a("blockquote",[a("p",[s._v("时间：2023/10/16 - 2023/10/22")])]),s._v(" "),a("h2",{attrs:{id:"一、点滴记录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、点滴记录"}},[s._v("#")]),s._v(" 一、点滴记录")]),s._v(" "),a("h3",{attrs:{id:"_1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1"}},[s._v("#")]),s._v(" 1")]),s._v(" "),a("p",[a("code",[s._v("centos")]),s._v(" 查看所有正在启动的服务 "),a("code",[s._v("systemctl | grep running")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"_2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2"}},[s._v("#")]),s._v(" 2")]),s._v(" "),a("p",[a("code",[s._v("vim")]),s._v("中：")]),s._v(" "),a("ul",[a("li",[s._v("使用 "),a("code",[s._v("ctrl")]),s._v(" + "),a("code",[s._v("f")]),s._v("下一页，使用 "),a("code",[s._v("ctrl")]),s._v(" + "),a("code",[s._v("b")]),s._v("上一页。")]),s._v(" "),a("li",[s._v("使用功能键 "),a("code",[s._v("Home")]),s._v("将光标移动到当前行的行首，"),a("code",[s._v("End")]),s._v(" 行末.")]),s._v(" "),a("li",[a("code",[s._v("gg")]),s._v("移动到文件的最开始位置，大写 "),a("code",[s._v("G")]),s._v("移动到最后一行。")]),s._v(" "),a("li",[a("code",[s._v("nG")]),s._v("移动到第 "),a("code",[s._v("n")]),s._v(" 行，比如 "),a("code",[s._v("6G")]),s._v("移动到第 "),a("code",[s._v("6")]),s._v(" 行。")]),s._v(" "),a("li",[a("code",[s._v("n<Enter>")]),s._v("，"),a("code",[s._v("n")]),s._v("  + 回车键，向下移动 "),a("code",[s._v("n")]),s._v(" 行。")]),s._v(" "),a("li",[s._v("在 "),a("code",[s._v("vimrc")]),s._v("配置文件中加上 "),a("code",[s._v("set nu")]),s._v("，就可以在 "),a("code",[s._v("vim")]),s._v(" 编辑文件时显示行号。")])]),s._v(" "),a("h3",{attrs:{id:"_3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3"}},[s._v("#")]),s._v(" 3")]),s._v(" "),a("p",[a("code",[s._v("Linux")]),s._v(" 防火墙常用命令")]),s._v(" "),a("ul",[a("li",[s._v("查看防火墙状态")])]),s._v(" "),a("p",[a("code",[s._v("firewall-cmd --state")])]),s._v(" "),a("ul",[a("li",[s._v("重启防火墙")])]),s._v(" "),a("p",[a("code",[s._v("firewall-cmd --reload")])]),s._v(" "),a("ul",[a("li",[s._v("查看所有打开的端口")])]),s._v(" "),a("p",[a("code",[s._v("firewall-cmd --zone=public --list-ports")])]),s._v(" "),a("ul",[a("li",[s._v("开放端口")])]),s._v(" "),a("p",[a("code",[s._v("firewall-cmd --zone=public --add-port=22/tcp --permanent")])]),s._v(" "),a("h3",{attrs:{id:"_4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4"}},[s._v("#")]),s._v(" 4")]),s._v(" "),a("p",[s._v("阿里云的默认会话保持时间只有 "),a("code",[s._v("3")]),s._v(" 小时，因此每天都要登录个好几次，有点烦人，通过账号->账号安全->登录保持时间改为 "),a("code",[s._v("24")]),s._v(" 小时，就不用频繁登录了。")]),s._v(" "),a("h3",{attrs:{id:"_5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5"}},[s._v("#")]),s._v(" 5")]),s._v(" "),a("p",[s._v("自己本地的数据库如果想给其他局域网的电脑连接，在 "),a("code",[s._v("mysql")]),s._v("数据库的 "),a("code",[s._v("user")]),s._v(" 表中将用户的 "),a("code",[s._v("Host")]),s._v("字段从 "),a("code",[s._v("localhost")]),s._v("改为 "),a("code",[s._v("%")]),s._v("。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("localhost")]),s._v("表示只允许本地连接")]),s._v(" "),a("li",[a("code",[s._v("%")]),s._v("表示允许任意 "),a("code",[s._v("ip")]),s._v(" 连接")])]),s._v(" "),a("h3",{attrs:{id:"_6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6"}},[s._v("#")]),s._v(" 6")]),s._v(" "),a("p",[a("code",[s._v("Linux")]),s._v(" "),a("code",[s._v("last")]),s._v(" 命令显示用户最近登录信息。")]),s._v(" "),a("h3",{attrs:{id:"_7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7"}},[s._v("#")]),s._v(" 7")]),s._v(" "),a("p",[a("code",[s._v("nginx")]),s._v("流量镜像配置，用来对一个请求，复制成多个。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 源站配置 ")]),s._v("\nlocation / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    mirror /mirror"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    mirror_request_body on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_pass http://127.0.0.1:8099"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 镜像站点配置")]),s._v("\nlocation /mirror "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 内部配置")]),s._v("\n    internal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 跳转到下面的内部 server")]),s._v("\n    proxy_pass http://127.0.0.1:9000"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request_uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_pass_request_body on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_set_header X-Original-URI "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request_uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h3",{attrs:{id:"_8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8"}},[s._v("#")]),s._v(" 8")]),s._v(" "),a("p",[a("code",[s._v("Linux")]),s._v(" 的 "),a("code",[s._v("/var/log/auth.log")]),s._v(" 系统日志中可以查看成功的登录，失败的登录尝试和认证方式，在我的腾讯云上面看到了很多恶意人士（脚本小子或黑客）尝试登录，把他们 "),a("code",[s._v("ip")]),s._v(" 封了吧。")]),s._v(" "),a("p",[a("code",[s._v("iptables -I INPUT -s 211.253.37.225 -j DROP")])]),s._v(" "),a("p",[a("code",[s._v("-I")]),s._v(" 在链中的指定位置插入一条或多条规则")]),s._v(" "),a("p",[a("code",[s._v("INPUT")]),s._v(" 处理输入数据包")]),s._v(" "),a("p",[a("code",[s._v("-s")]),s._v("指定 "),a("code",[s._v("ip")])]),s._v(" "),a("p",[a("code",[s._v("-j")]),s._v(" 即满足某条件时该执行什么样的动作")]),s._v(" "),a("p",[a("code",[s._v("DROP")]),s._v(" 丢弃数据包。")]),s._v(" "),a("p",[s._v("封了十来个 "),a("code",[s._v("ip")]),s._v("，发现还是有恶意人士来尝试登录，根本封不完，于是我在 "),a("code",[s._v("/etc/ssh/sshd_config")]),s._v("中，配置只允许某些 "),a("code",[s._v("ip")]),s._v(" 通过 "),a("code",[s._v("root")]),s._v(" 用户来登录。")]),s._v(" "),a("div",{staticClass:"language-conf line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("PermitRootLogin yes\nStrictModes yes\nAllowUsers root@xxx.xxx.xxx.xxx root@xxx.xxx.xxx.xxx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("修改后通过 "),a("code",[s._v("systemctl restart sshd.service")]),s._v("命令使配置生效。\n效果拔群，没有什么恶意人士来尝试登录了。")]),s._v(" "),a("p",[a("img",{attrs:{src:t(321),alt:""}})]),s._v(" "),a("p",[s._v("命令："),a("code",[s._v("iptables -L")]),s._v("查看链上面的所有规则，曝光这些恶意人士 "),a("code",[s._v("ip")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Chain INPUT "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("policy ACCEPT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntarget     prot opt "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v("               destination         \nDROP       all  --  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("211.253")]),s._v(".37.225       anywhere            \nDROP       all  --  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("211.253")]),s._v(".37.225       anywhere            \nDROP       all  --  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("51.250")]),s._v(".88.173        anywhere            \nDROP       all  --  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("180.153")]),s._v(".91.15        anywhere            \nDROP       all  --  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43.228")]),s._v(".142.188       anywhere            \nDROP       all  --  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("170.64")]),s._v(".208.5         anywhere            \nDROP       all  --  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123.157")]),s._v(".77.200       anywhere            \nDROP       all  --  static-181-143-230-78.une.net.co  anywhere            \nDROP       all  --  ip-114-199-123-211.netzap.net.id  anywhere            \nDROP       all  --  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("195.158")]),s._v(".5.10         anywhere            \nDROP       all  --  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("218.92")]),s._v(".0.93          anywhere            \nDROP       all  --  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("112.187")]),s._v(".225.220      anywhere            \nDROP       all  --  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("107")]),s._v("-174-243-101-host.colocrossing.com  anywhere            \nDROP       all  --  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("175.203")]),s._v(".61.33        anywhere  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h2",{attrs:{id:"二、发现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、发现"}},[s._v("#")]),s._v(" 二、发现")]),s._v(" "),a("h3",{attrs:{id:"_1-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2"}},[s._v("#")]),s._v(" 1")]),s._v(" "),a("p",[s._v("crontab")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://crontab.cronhub.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://crontab.cronhub.io/"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("code",[s._v("cron")]),s._v(" 表达式生成器。")]),s._v(" "),a("h3",{attrs:{id:"_2-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2"}},[s._v("#")]),s._v(" 2")]),s._v(" "),a("p",[a("code",[s._v("Vim")]),s._v("中文帮助")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://yianwillis.github.io/vimcdoc/doc/help.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://yianwillis.github.io/vimcdoc/doc/help.html"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"_3-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2"}},[s._v("#")]),s._v(" 3")]),s._v(" "),a("p",[a("code",[s._v("nginx")]),s._v("中文文档")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://docshome.gitbook.io/nginx-docs/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docshome.gitbook.io/nginx-docs/"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);